<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div id="newsPanel"></div>
    <script src="/static/jquery-1.8.3.js"></script>
    <script src="/static/eventsource.min.js"></script>
    <script>
        function appendNews(newsPanel, news) {
            var newsHtml =
                    '<div>' +
                        '<h1>' + news.headline + '</h1>' +
                        '<h2>' + news.content + '</h2>' +
                    '</div>';
            newsPanel.append(newsHtml);
        }

        $(document).ready(function() {
            var newsPanel = $('#newsPanel');

            var es = new EventSource("news-stream");
            var listener = function (event) {
                console.log("Got new-news: " + event.data);
                appendNews(newsPanel, JSON.parse(event.data));
            };
            es.addEventListener("open", listener);
            es.addEventListener("message", listener);
            es.addEventListener("error", listener);
        });
    </script>
</body>
</html>